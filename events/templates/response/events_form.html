{% extends "base.html" %}
{% load static %}
{% block page_name %}
{% endblock page_name %}
{% block content %}


<h1>Responder à Ocorrência</h1>
<div class="card">
    <div class="card-body">
        <h5 class="card-title text-primary mb-4">
            <div class="row g-3">
                <div class="col-md-11">
                    <div class="card-header">
                        Dados da Ocorrência N° <b>{{ocurrence.id}}</b>
                    </div>
                </div>
                <div class="col-md-1">

                    {% if ocurrence.patient_involved %}
                    <img src="{% static 'assets/img/patient.png' %}" alt="patient_involved_yes" width="50px">

                    {% else %}
                    <img src="{% static 'assets/img/ocurrence.png' %}" alt="patient_involved_no" width="50px">
                    {% endif %}
                </div>

            </div>
        </h5>
        {% if ocurrence.patient_involved %}
        {% include 'response/partial/_events_form_patient.html' %}
        {% endif %}

        {% include 'response/partial/_events_form_ocurrence_1.html' %}
        <!-- {% include 'response/partial/_events_form_ocurrence_message.html' %} -->
        {% include 'response/partial/_events_form_ocurrence_2.html' %}


    </div>
</div>


















<h3>Respostas Existentes</h3>
<ul>
    {% for response in responses %}
    <li>{{ response.author.username }}: {{ response.description }}</li>
    {% empty %}
    <li>Não há respostas ainda.</li>
    {% endfor %}
</ul>

<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Enviar Resposta</button>
</form>
{% endblock content %}


{% comment %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Resposta à Ocorrência</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2>Formulário de Resposta à Ocorrência</h2>
        <form method="post">
            {% csrf_token %}

            <!-- Ocorrência -->
            <div class="mb-3">
                <label for="id_ocurrence" class="form-label">{{ form.ocurrence.label }}</label>
                {{ form.ocurrence }}
            </div>

            <!-- Meta -->
            <div class="mb-3">
                <label for="id_meta" class="form-label">{{ form.meta.label }}</label>
                {{ form.meta }}
            </div>

            <!-- Descrição -->
            <div class="mb-3">
                <label for="id_description" class="form-label">{{ form.description.label }}</label>
                {{ form.description }}
                <div class="form-text">Descrição da Tratativa</div>
            </div>

            <!-- Enviado para o Gestor? -->
            <div class="mb-3">
                <label class="form-label">{{ form.send_manager.label }}</label>
                <div class="form-check">
                    {{ form.send_manager }}
                </div>
            </div>

            <!-- Investigação do Evento -->
            <div class="mb-3">
                <label class="form-label">{{ form.event_investigation.label }}</label>
                <div class="form-check">
                    {{ form.event_investigation }}
                </div>
            </div>

            <!-- Classificação do Incidente -->
            <div class="mb-3">
                <label for="id_incident_classification" class="form-label">{{ form.incident_classification.label
                    }}</label>
                {{ form.incident_classification }}
            </div>

            <!-- Classificação da Ocorrência -->
            <div class="mb-3">
                <label for="id_ocurrence_classification" class="form-label">{{ form.ocurrence_classification.label
                    }}</label>
                {{ form.ocurrence_classification }}
            </div>

            <!-- Classificação do Dano -->
            <div class="mb-3">
                <label for="id_damage_classification" class="form-label">{{ form.damage_classification.label }}</label>
                {{ form.damage_classification }}
            </div>

            <!-- Botão de envio -->
            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
{% endcomment %}